---

description: "功能实现的任务列表模板"
---

# 任务: [功能名称]

**输入**: 来自 `/specs/[###-feature-name]/` 的设计文档
**前提条件**: plan.md（必填）、spec.md（用户故事必填）、research.md、data-model.md、contracts/ 目录

**测试**: 以下示例包含测试任务。测试为可选项——仅当功能规格中明确要求时才纳入。

**组织方式**: 任务按用户故事分组，以便每个故事可独立实现和测试。

## 格式: `[ID] [P?] [故事] 描述`

- **[P]**: 可并行执行（不同文件，无依赖）
- **[故事]**: 该任务所属的用户故事（例如：US1、US2、US3）
- 描述中需包含确切文件路径

## 路径约定

- **单一项目**: 仓库根目录下的 `src/`、`tests/`
- **Web 应用**: `backend/src/`、`frontend/src/`
- **移动端**: `api/src/`、`ios/src/` 或 `android/src/`
- 以下展示的路径默认基于单一项目——根据 plan.md 结构调整

<!-- 
  ============================================================================
  重要提示：以下任务仅为示例，用于说明用途。
  
  /speckit.tasks 命令必须根据以下内容替换这些示例任务：
  - spec.md 中的用户故事（及其优先级 P1、P2、P3...）
  - plan.md 中的功能需求
  - data-model.md 中的实体
  - contracts/ 中的接口
  
  任务必须按用户故事组织，确保每个故事能够：
  - 独立实现
  - 独立测试
  - 作为最小可行产品（MVP）增量交付
  
  生成的 tasks.md 文件中请勿保留这些示例任务。
  ============================================================================
-->

## 阶段 1: 搭建（共享基础设施）

**目的**: 项目初始化与基础结构搭建

- [ ] T001 按实现计划创建项目结构
- [ ] T002 使用 [框架] 依赖初始化 [编程语言] 项目
- [ ] T003 [P] 配置代码检查与格式化工具

---

## 阶段 2: 基础核心（阻塞性前提）

**目的**: 任何用户故事实现前必须完成的核心基础设施

**⚠️ 关键**: 本阶段完成前，不得开始任何用户故事相关工作

基础任务示例（根据项目调整）：

- [ ] T004 搭建数据库模式与迁移框架
- [ ] T005 [P] 实现认证/授权框架
- [ ] T006 [P] 搭建 API 路由与中间件结构
- [ ] T007 创建所有故事依赖的基础模型/实体
- [ ] T008 配置错误处理与日志记录基础设施
- [ ] T009 搭建环境配置管理系统

**检查点**: 基础就绪——用户故事实现可并行开始

---

## 阶段 3: 用户故事 1 - [标题]（优先级: P1）🎯 最小可行产品（MVP）

**目标**: [该故事交付内容的简要描述]

**独立测试方式**: [如何独立验证该故事功能正常]

### 用户故事 1 的测试（可选——仅当要求测试时）⚠️

> **注意：需先编写这些测试，并确保实现前测试处于失败状态**

- [ ] T010 [P] [US1] 端点 [endpoint] 的契约测试，路径：tests/contract/test_[name].py
- [ ] T011 [P] [US1] 用户旅程 [user journey] 的集成测试，路径：tests/integration/test_[name].py

### 用户故事 1 的实现

- [ ] T012 [P] [US1] 创建实体 [Entity1] 模型，路径：src/models/[entity1].py
- [ ] T013 [P] [US1] 创建实体 [Entity2] 模型，路径：src/models/[entity2].py
- [ ] T014 [US1] 实现服务 [Service]，路径：src/services/[service].py（依赖 T012、T013）
- [ ] T015 [US1] 实现端点/功能 [endpoint/feature]，路径：src/[location]/[file].py
- [ ] T016 [US1] 添加验证逻辑与错误处理
- [ ] T017 [US1] 为用户故事 1 的操作添加日志记录

**检查点**: 此时用户故事 1 应完全可用且可独立测试

---

## 阶段 4: 用户故事 2 - [标题]（优先级: P2）

**目标**: [该故事交付内容的简要描述]

**独立测试方式**: [如何独立验证该故事功能正常]

### 用户故事 2 的测试（可选——仅当要求测试时）⚠️

- [ ] T018 [P] [US2] 端点 [endpoint] 的契约测试，路径：tests/contract/test_[name].py
- [ ] T019 [P] [US2] 用户旅程 [user journey] 的集成测试，路径：tests/integration/test_[name].py

### 用户故事 2 的实现

- [ ] T020 [P] [US2] 创建实体 [Entity] 模型，路径：src/models/[entity].py
- [ ] T021 [US2] 实现服务 [Service]，路径：src/services/[service].py
- [ ] T022 [US2] 实现端点/功能 [endpoint/feature]，路径：src/[location]/[file].py
- [ ] T023 [US2] 与用户故事 1 的组件集成（如需）

**检查点**: 此时用户故事 1 和 2 应均可独立运行

---

## 阶段 5: 用户故事 3 - [标题]（优先级: P3）

**目标**: [该故事交付内容的简要描述]

**独立测试方式**: [如何独立验证该故事功能正常]

### 用户故事 3 的测试（可选——仅当要求测试时）⚠️

- [ ] T024 [P] [US3] 端点 [endpoint] 的契约测试，路径：tests/contract/test_[name].py
- [ ] T025 [P] [US3] 用户旅程 [user journey] 的集成测试，路径：tests/integration/test_[name].py

### 用户故事 3 的实现

- [ ] T026 [P] [US3] 创建实体 [Entity] 模型，路径：src/models/[entity].py
- [ ] T027 [US3] 实现服务 [Service]，路径：src/services/[service].py
- [ ] T028 [US3] 实现端点/功能 [endpoint/feature]，路径：src/[location]/[file].py

**检查点**: 所有用户故事此时应均可独立运行

---

[按需添加更多用户故事阶段，遵循相同格式]

---

## 阶段 N: 优化与跨领域事项

**目的**: 影响多个用户故事的改进工作

- [ ] TXXX [P] 更新 docs/ 目录下的文档
- [ ] TXXX 代码清理与重构
- [ ] TXXX 全故事性能优化
- [ ] TXXX [P] 添加额外单元测试（如需），路径：tests/unit/
- [ ] TXXX 安全加固
- [ ] TXXX 执行 quickstart.md 验证

---

## 依赖关系与执行顺序

### 阶段依赖

- **搭建阶段（阶段 1）**: 无依赖——可立即开始
- **基础核心阶段（阶段 2）**: 依赖搭建阶段完成——阻塞所有用户故事
- **用户故事阶段（阶段 3+）**: 均依赖基础核心阶段完成
  - 用户故事随后可并行推进（如有资源）
  - 或按优先级顺序串行推进（P1 → P2 → P3）
- **优化阶段（最终阶段）**: 依赖所有目标用户故事完成

### 用户故事依赖

- **用户故事 1（P1）**: 基础核心阶段（阶段 2）完成后可开始——无其他故事依赖
- **用户故事 2（P2）**: 基础核心阶段（阶段 2）完成后可开始——可能与 US1 集成，但需可独立测试
- **用户故事 3（P3）**: 基础核心阶段（阶段 2）完成后可开始——可能与 US1/US2 集成，但需可独立测试

### 单个用户故事内部

- 测试（如包含）必须在实现前编写并确保失败
- 先模型，后服务
- 先服务，后端点
- 先核心实现，后集成
- 故事完成后再进入下一优先级

### 并行执行机会

- 所有标记 [P] 的搭建任务可并行执行
- 所有标记 [P] 的基础核心任务可并行执行（阶段 2 内）
- 基础核心阶段完成后，所有用户故事可并行开始（如团队容量允许）
- 单个用户故事下所有标记 [P] 的测试可并行执行
- 单个故事内标记 [P] 的模型可并行执行
- 不同团队成员可并行处理不同用户故事

---

## 并行示例：用户故事 1

```bash
# 同时启动用户故事 1 的所有测试（如需测试）：
任务: "端点 [endpoint] 的契约测试，路径：tests/contract/test_[name].py"
任务: "用户旅程 [user journey] 的集成测试，路径：tests/integration/test_[name].py"

# 同时启动用户故事 1 的所有模型创建任务：
任务: "创建实体 [Entity1] 模型，路径：src/models/[entity1].py"
任务: "创建实体 [Entity2] 模型，路径：src/models/[entity2].py"
```

---

## 实现策略

### 先完成 MVP（仅用户故事 1）

1. 完成阶段 1: 搭建
2. 完成阶段 2: 基础核心（关键——阻塞所有故事）
3. 完成阶段 3: 用户故事 1
4. **暂停并验证**: 独立测试用户故事 1
5. 就绪后部署/演示

### 增量交付

1. 完成搭建 + 基础核心 → 基础就绪
2. 加入用户故事 1 → 独立测试 → 部署/演示（MVP！）
3. 加入用户故事 2 → 独立测试 → 部署/演示
4. 加入用户故事 3 → 独立测试 → 部署/演示
5. 每个故事新增价值且不破坏已有故事

### 团队并行策略

多开发者协作时：

1. 团队共同完成搭建 + 基础核心阶段
2. 基础核心阶段完成后：
   - 开发者 A: 负责用户故事 1
   - 开发者 B: 负责用户故事 2
   - 开发者 C: 负责用户故事 3
3. 各故事独立完成并集成

---

## 注意事项

- [P] 任务 = 不同文件，无依赖
- [故事] 标签将任务关联到特定用户故事，确保可追溯
- 每个用户故事应可独立完成和测试
- 实现前验证测试处于失败状态
- 完成每个任务或逻辑分组后提交代码
- 可在任意检查点暂停，独立验证故事功能
- 避免：模糊任务、同一文件冲突、破坏独立性的跨故事依赖